<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--        <record model="ir.ui.view" id="hr_attendance_calendar_calendar">-->
        <!--            <field name="name">hr_attendance_calendar_view_calendar</field>-->
        <!--            <field name="model">hr.attendance.calendar</field>-->
        <!--            <field name="arch" type="xml">-->
        <!--                <calendar js_class="hr_attendance_calendar_view_calendar_js" string="Planeamiento de Asistencias" event_open_popup="true" date_start="date_from" date_stop="date_to" mode="month" quick_add="False" show_unusual_days="True">-->
        <!--                    <field name="employee_id"/>-->
        <!--                </calendar>-->
        <!--</field>-->
        <!--        </record>-->
        <record id="hr_attendance_calendar_tree" model="ir.ui.view">
            <field name="name">hr_attendance_calendar_view_tree</field>
            <field name="model">hr.attendance.calendar</field>
            <field name="arch" type="xml">
                <tree string="Planeamiento de Asistencias">
                    <field name="applied_on"/>
                    <field name="employee_id"/>
                    <field name="contract_id"/>
                    <field name="department_id"/>
                    <field name="company_id"/>
                    <field name="resource_calendar_id"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                </tree></field>
        </record>
        <record id="hr_attendance_calendar_form" model="ir.ui.view">
            <field name="name">hr_attendance_calendar_view_form</field>
            <field name="model">hr.attendance.calendar</field>
            <field name="arch" type="xml">
                <form string="Planeamiento de Asistencias">
                    <sheet>
                        <group>
                            <group string="Aplicación">
                                <field name="applied_on"/>
                                <field invisible="applied_on != 'employee'" name="employee_id" required="applied_on == 'employee'"/>
                                <field domain="[('employee_id','=',employee_id),('state','=','open')]" invisible="applied_on != 'employee'" name="contract_id" required="applied_on == 'employee'"/>
                                <field invisible="applied_on != 'department'" name="department_id" required="applied_on == 'department'"/>
                            </group>
                            <group string="Horario">
                                <field name="resource_calendar_id"/>
                                <field name="date_from"/>
                                <field name="date_to"/>
                                <field invisible="True" name="attendance_calendar_conflict"/>
                                <field invisible="attendance_calendar_conflict == False" name="sequence" required="attendance_calendar_conflict == True"/>
                            </group>
                        </group>
                        <span invisible="attendance_calendar_conflict == False" style="color:darkred;">
                            Para el rango de fechas indicado existen más de un planeamiento, debe de establecer la prioridad de los mismos para la correcta
                            asignación de horarios en las asistencias
                        </span>
                    </sheet>
                </form></field>
        </record>
        <record id="hr_attendance_calendar_search_view" model="ir.ui.view">
            <field name="name">hr_attendance_calendar_search_view</field>
            <field name="model">hr.attendance.calendar</field>
            <field name="arch" type="xml">
                <search>
                    <group expand="0" string="Group By">
                        <field filter_domain="['|',('employee_id','ilike',self),('contract_id','ilike',self)]" name="employee_id"/>
                        <field filter_domain="[('resource_calendar_id','ilike',self)]" name="resource_calendar_id"/>
                        <field filter_domain="[('company_id','ilike',self)]" name="company_id"/>
                        <filter context="{'group_by':'applied_on'}" domain="[]" name="group_by_applied_on" string="Aplicar Sobre"/>
                        <filter context="{'group_by':'department_id'}" domain="[]" name="group_by_department_id" string="Departamento"/>
                        <filter context="{'group_by':'company_id'}" domain="[]" name="group_by_company_id" string="Compañía"/>
                    </group>
                </search></field>
        </record>
        <record id="hr_attendance_calendar_action" model="ir.actions.act_window">
            <field name="name">Planeamiento de Asistencias</field>
            <field name="res_model">hr.attendance.calendar</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem id="rrhh_asistencias.menu_asistencias_padre" name="Asistencias" parent="hr_attendance.menu_hr_attendance_root"/>
        <menuitem action="hr_attendance_calendar_action" id="hr_attendance_calendar_menuitem" name="Planeamiento de Asistencias" parent="rrhh_asistencias.menu_asistencias_padre"/>
    </data>
</odoo>
